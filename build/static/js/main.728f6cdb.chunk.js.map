{"version":3,"sources":["data/config/utils.js","data/config/constants.js","data/redux/actiontypes.js","data/redux/chat_details/actions.js","data/redux/chat_details/middleware.js","data/redux/chat_details/states.js","data/redux/chat_details/reducers.js","data/redux/page_details/states.js","data/redux/rootreducer.js","data/redux/page_details/reducers.js","serviceWorker.js","data/redux/page_details/actions.js","components/triggerchatbot/index.js","modules/index.js","index.js","data/redux/store.js","data/config/urls.js"],"names":["s4","Math","floor","random","toString","substring","DEV_VAR","uniqueId","time","Date","getTime","log","str","value","console","checkImageTypeFile","filename","test","fileToBase64","file","Promise","resolve","reader","FileReader","onload","event","target","result","readAsDataURL","getCookie","name","v","document","cookie","match","PLATFORM","ANDROID","WEBSITE","getPlatform","window","ori_platform","undefined","toLowerCase","isAndroid","platform","getPsid","psid","localStorage","getItem","setItem","LOCAL_STORAGE","MESSAGES","UNSEEN_MESSAGES","NOTIFICATION_COUNT","LAST_EMIT","PSID","IS_CHAT_OPEN","APP_PARAMS","END_CHAT","getDataFromLocalStorage","key","undefined_return_value","data","JSON","parse","setDataInLocalStorage","json_data","stringify","getDefaultMessages","android_default_messages","default_messages","getLocalMessage","getLocalUnseenMessage","getLocalNotificationCount","getLocalChatOpenStatus","formatDate","options","toLocaleDateString","formatTime","toLocaleTimeString","scrollToBottom","node","scrollTop","scrollHeight","checkDevice","screen_data","screen_width","innerWidth","screen_height","innerHeight","screen_orientation","this","screen_type","matchMedia","matches","deviceStatus","ERROR_BOUNDARY_TYPE","ERROR","EVENTS","CONNECT","DISCONNECT","CONNECT_ERROR","RESPONSE","NEW_MESSAGE","RESET_CHAT","SHOW_TYPING","BOT_AUTO_POPUP_REQUEST","RECORD_FEEDBACK","GET_WEBSITE_DATA","WEBSITE_DATA","CHATLOG_FEEDBACK","TYPING_STATUS","UPDATE_MESSAGE","UPDATE_ADMIN_MESSAGE","MESSAGE_SEEN","END_CONVERSATION","END_CONVERSATION_FORM_SUBMIT","MESSAGE_TYPES","TEXT","LIST","TEXT_WITH_BUTTONS","IMAGE_WITH_BUTTONS","CHECKBOX_WITH_MEDIA","VIDEO","TIMER","CAROUSEL","CUSTOM_MSG","NOTIFICATION","UPLOAD_FILE","FILE","SYSTEM_TEXT","MESSAGE_SUBTYPES","DISH_RECHARGE","DISH_RECHARGE_DETAILS","DISH_OFFERS","DISH_RECHARGE_HISTORY","MESSAGE_READ_STATUS","SENDING","SENT","DELIVERED","SEEN","FAILED","BUTTON_TYPES","LINK","DEFAULT","CUSTOM","CUSTOM_SOCKET_EVENT","POST_BACK_RESPONSE","BUTTON_SUB_TYPES","CHECKBOX_SUBMIT","MESSAGE_SENDER","SYSTEM","CUSTOMER","ADMIN","CHATBOT","sender","type","inputLock","quickReply","skipLS","send_variable_to_apiai","sendVariableToLS","variable_name","delay","payload","text","timestamp","quickReplies","title","subtitle","buttons","url","actionTypes","DEVICE_DATA_LOADED","ENABLE_ADSTER_BOT","UPDATE_STATE","UPDATE_END_CHAT","MAKE_SOCKET_CONNECTION","SOCKET_DISCONNECT","BOT_POPUP_REQUEST","EMIT_NEW_MESSAGE","EMIT_CUSTOM_EVENT","MESSAGE_VOTING","SEND_FEEDBACK","UPDATE_TYPING_INFO","UPDATE_PSID","HANDLE_CHATBOT_INTERFACE","SOCKET_CONNECTED","SOCKET_CONNECT_ERROR","SOCKET_ERROR","PUSH_RESPONSE_MESSAGE","PUSH_SENDER_MESSAGE","SET_DEFAULT_STATE","CLEAR_UNSEEN_MESSAGES","UPDATE_FILE_UPLOAD_MESSAGE","updateState","updateEndChat","makeSocketConnection","socketDisconnect","handleBotPopupRequest","emitCustomEvent","callback","emitNewMessageToServer","pushSenderMessage","message","onMessageVoting","resetChat","sendFeedback","handleChatbotInterface","setDefaultState","messages","updateFileUploadMessage","registerSocketListener","store","socket","on","chat_details","getState","dispatch","connected","chatbot_setting","auto_emit_response","enable","length","session_id","io","engine","id","current_session_id","sender_id","chatbot_client_info","navigator_userAgent","navigator","userAgent","navigator_platform","emit","clientPsid","senderPsid","error","reason","connect","res","bot_messages","cmid","chatlogId","updated_message_data","readStatus","err","visibilityState","is_chat_open","message_seen_payload","websiteData","forEach","item","source","newKey","typingInfo","updateChatlogId","changedValue","updatedCustomerMessage","messageSeen","visible","show_resolved_card","middleware","next","action","close","socket_url","getSocketUrl","displayMessage","voteType","ok","unseen_messages","notification_count","states","is_socket_connected","is_internet_connected","is_typing","typing_text","quick_replies","CONSTANTS","SERVER","is_input_lock","input_lock_text","inputLockMessage","end_chat","show_confirmation_card","show_form_card","form","description","state","removeItem","msg_length","isTyping","typingMessage","index","findLastIndex","slice","i","page_details","device_data","is_adster_bot","rootReducer","combineReducers","Boolean","location","hostname","setDeviceData","enableAdsterBot","TriggerChatBot","lottieDefaultOptions","loop","autoplay","path","trigger","lottie_path","rendererSettings","preserveAspectRatio","handleChatInterfaceView","props","handleSocketConnection","className","onClick","lottie_visibility","height","lottie_icon_height","width","lottie_icon_width","visibility","style","icon_height","animationDuration","animation_duration","src","icon_url","alt","size","show_close_icon","React","PureComponent","ChatBot","lazy","NotificationBot","AppContainer","handleConnectionChange","actions","onLine","webPing","setInterval","fetch","mode","then","clearInterval","catch","botPopup","case_data","params","case","bool","android","handleOfferSelection","offer_id","offer_name","setState","selected_offer","setDefaultOfferState","onChangeCheckbox","selected_checkbox_values","emitResponseToServer","response","lockedParams","emit_time","pushSenderNewMsgToChatbot","user_message","sendTextToServer","handleButtonSubTypes","button","subtype","selected_checkbox_items","filter","findIndex","list","relayData","obj","handleMsgBtnClick","trim","androidObj","textToAndroid","open","eventName","merge","expectedClientResponseType","postbackRes","handleFileUpload","fileUrl","fileBase64","imageUrl","timeout","self","bot_popup","addEventListener","clearTimeout","setTimeout","updateFromAndroid","last_emit","time_gap","automate_connection_time","automate_reset_chat_time","adster_bot","URLSearchParams","search","get","query_param_key","removeEventListener","count","overflowCount","fallback","notification_bot","stack_view","Component","bindActionCreators","Object","assign","pageActions","chatActions","middlewares","socketMiddleware","_createStore","compose","applyMiddleware","devToolsExtension","f","createStore","x","createElement","setAttribute","body","appendChild","ReactDOM","render","getElementById","serviceWorker","ready","registration","unregister","sentry_dsn","brand_name","mobile_icon_width","powered_by","target_url","chat_interface","show_bg_image","bg_image_url","chatbot_status","common","socket_connection_lost","feedback","greeting","low_rated","high_rated","success","failed"],"mappings":"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","file":"static/js/main.728f6cdb.chunk.js","sourcesContent":["import { default_messages, android_default_messages } from './constants';\n\nconst s4 = () => {\n  return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\n}\n\nconst DEV_VAR = {\n  ENABLE_CONSOLE: true,\n};\n\nexport const guid = () => {\n  return s4() + s4() +\n    s4() + s4();\n};\n\nexport const uniqueId = () => {\n  let time = new Date().getTime();\n  return `${time}_${guid()}`;\n};\n\nexport const log = (str, value) => {\n  if (DEV_VAR.ENABLE_CONSOLE) {\n    value ? console.log(str, value) : console.log(str);\n  }\n};\n\nexport const checkImageTypeFile = filename => {\n  return (/\\.(gif|jpg?g|tiff|png)$/i).test(filename)\n};\n\nexport const fileToBase64 = file => {\n  return new Promise(resolve => {\n    var reader = new FileReader();\n    reader.onload = event => {\n      resolve(event.target.result);\n    };\n    reader.readAsDataURL(file);\n  });\n};\n\nexport const getCookie = (name) => {\n  var v = document.cookie.match('(^|;) ?' + name + '=([^;]*)(;|$)');\n  return v ? v[2] : null\n};\n\nexport const PLATFORM = {\n  ANDROID: \"android\",\n  WEBSITE: \"website\",\n};\n\nexport const getPlatform = () => {\n  let platform = null;\n  if (window.ori_platform && window.ori_platform !== undefined && window.ori_platform.toLowerCase() === PLATFORM.ANDROID) {\n    platform = PLATFORM.ANDROID;\n  } else {\n    platform = PLATFORM.WEBSITE;\n  }\n  return platform;\n};\n\nexport const isAndroid = () => {\n  let platform = getPlatform();\n  return (platform && platform.toLowerCase() === PLATFORM.ANDROID);\n};\n\nexport const getPsid = () => {\n  let psid = null;\n  if (localStorage.getItem('psid')) {\n    psid = localStorage.getItem('psid');\n  } else {\n    psid = uniqueId();\n    localStorage.setItem('psid', psid);\n  }\n  return psid;\n};\n\nexport const LOCAL_STORAGE = {\n  MESSAGES: getPsid,\n  UNSEEN_MESSAGES: \"unseen_messages\",\n  NOTIFICATION_COUNT: \"notification_count\",\n  LAST_EMIT: \"last_emit\",\n  PSID: \"psid\",\n  IS_CHAT_OPEN: \"is_chat_open\",\n  ANDROID: \"android\",\n  APP_PARAMS: \"app_params\",\n  END_CHAT: \"end_chat\"\n};\n\nexport const hasAndroidInterface = () => { //the java JS interface exists for android\n  let android = localStorage.getItem(LOCAL_STORAGE.ANDROID) ? JSON.parse(localStorage.getItem(LOCAL_STORAGE.ANDROID)) : false;\n  return (android);\n};\n\nexport const getDataFromLocalStorage = (key, undefined_return_value) => {\n  const data = localStorage.getItem(key);\n  return (data && data !== undefined ? JSON.parse(data) : undefined_return_value);\n};\n\nexport const setDataInLocalStorage = (key, data) => {\n  const json_data = JSON.stringify(data);\n  localStorage.setItem(key, json_data);\n};\n\nexport const getDefaultMessages = () => {\n  const is_android = isAndroid();\n  if (is_android) {\n    return android_default_messages;\n  }\n  return default_messages;\n};\n\nexport const getLocalMessage = () => {\n  const messages = localStorage.getItem(LOCAL_STORAGE.MESSAGES()) ? JSON.parse(localStorage.getItem(LOCAL_STORAGE.MESSAGES())) : getDefaultMessages();\n  return messages;\n};\n\nexport const getLocalUnseenMessage = () => {\n  let unseen_messages = localStorage.getItem(LOCAL_STORAGE.UNSEEN_MESSAGES) ? JSON.parse(localStorage.getItem(LOCAL_STORAGE.UNSEEN_MESSAGES)) : [];\n  return unseen_messages;\n};\n\nexport const getLocalNotificationCount = () => {\n  let count = localStorage.getItem(LOCAL_STORAGE.NOTIFICATION_COUNT) ? JSON.parse(localStorage.getItem(LOCAL_STORAGE.NOTIFICATION_COUNT)) : 0;\n  return count;\n};\n\nexport const getLocalChatOpenStatus = () => {\n  let is_chat_open = localStorage.getItem(LOCAL_STORAGE.IS_CHAT_OPEN) ? JSON.parse(localStorage.getItem(LOCAL_STORAGE.IS_CHAT_OPEN)) : false;\n  return is_chat_open;\n};\n\nexport const formatDate = (value, options) => {\n  let date = new Date(value);\n  return date.toLocaleDateString('en-In', options);\n};\n\nexport const formatTime = (value, options) => {\n  let date = new Date(value);\n  return date.toLocaleTimeString('en-In', options);\n};\n\nexport const scrollToBottom = node => {\n  if (node) {\n    node.scrollTop = node.scrollHeight;\n  }\n};\n\nexport const checkDevice = {\n  screen_data: function () {\n    return (\n      {\n        screen_width: window.innerWidth,\n        screen_height: window.innerHeight,\n        screen_orientation: this.screen_orientation(),\n        screen_type: this.screen_type()\n      }\n    );\n  },\n  screen_orientation: function () {\n    if (window.matchMedia(\"(orientation:landscape)\").matches) {\n      return 'landscape';\n    } else {\n      return 'portrait';\n    }\n  },\n  screen_type: function () {\n    if (window.innerWidth <= 480) {\n      return 'xs';\n    } else if (window.innerWidth <= 768) {\n      return 'sm';\n    } else if (window.innerWidth <= 992) {\n      return 'md';\n    } else if (window.innerWidth <= 1200) {\n      return 'lg';\n    } else if (window.innerWidth <= 1600) {\n      return 'hd';\n    } else if (window.innerWidth <= 2560) {\n      return 'fhd';\n    } else {\n      return 'uhd';\n    }\n  },\n  deviceStatus: function () {\n    return ({\n      ...this.screen_data()\n    });\n  }\n};\n","export const ERROR_BOUNDARY_TYPE = {\n    ERROR: \"error\",\n};\n\nexport const EVENTS = {\n    CONNECT: \"connect\",\n    DISCONNECT: \"disconnect\",\n    CONNECT_ERROR: \"connect_error\",\n    ERROR: \"error\",\n    RESPONSE: \"response\",\n    NEW_MESSAGE: \"new_message\",\n    RESET_CHAT: \"reset_chat\",\n    SHOW_TYPING: \"show_typing\",\n    BOT_AUTO_POPUP_REQUEST: \"botAutoPopupRequest\",\n    RECORD_FEEDBACK: \"recordFeedback\",\n    GET_WEBSITE_DATA: \"getWebsiteData\",\n    WEBSITE_DATA: \"websiteData\",\n    CHATLOG_FEEDBACK: \"chatlogFeedback\",\n    TYPING_STATUS: \"typingStatus\",\n    UPDATE_MESSAGE: \"updateMessage\",\n    UPDATE_ADMIN_MESSAGE: \"updateAdminMessage\",\n    MESSAGE_SEEN: \"messageSeen\",\n    END_CONVERSATION: \"end_conversation\",\n    END_CONVERSATION_FORM_SUBMIT: \"end_conversation_form_submit\",\n};\n\nexport const MESSAGE_TYPES = {\n    TEXT: \"text\",\n    LIST: \"list\",\n    TEXT_WITH_BUTTONS: \"text_with_buttons\",\n    IMAGE_WITH_BUTTONS: \"image_with_buttons\",\n    CHECKBOX_WITH_MEDIA: \"checkbox_with_media\",\n    VIDEO: \"video\",\n    TIMER: \"timer\",\n    CAROUSEL: \"carousel\",\n    CUSTOM_MSG: \"customMsg\",\n    NOTIFICATION: \"notification\",\n    UPLOAD_FILE: \"uploadFile\",\n    FILE: \"file\",\n    SYSTEM_TEXT: \"systemText\",\n};\n\nexport const MESSAGE_SUBTYPES = {\n    DISH_RECHARGE: \"dishRecharge\",\n    DISH_RECHARGE_DETAILS: \"dishRechargeDetails\",\n    DISH_OFFERS: \"dishOffers\",\n    DISH_RECHARGE_HISTORY: \"dishRechargeHistory\",\n};\n\nexport const MESSAGE_READ_STATUS = {\n    SENDING: 'sending',\n    SENT: 'sent',\n    DELIVERED: 'delivered',\n    SEEN: 'seen',\n    FAILED: 'failed',\n};\n\nexport const BUTTON_TYPES = {\n    LINK: \"link\",\n    DEFAULT: \"default\",\n    CUSTOM: \"custom\",\n    CUSTOM_SOCKET_EVENT: \"customSocketEvent\",\n    POST_BACK_RESPONSE: \"postbackRes\",\n};\n\nexport const BUTTON_SUB_TYPES = {\n    DISH_OFFERS: \"dishOffers\",\n    CHECKBOX_SUBMIT: \"checkboxSubmit\",\n};\n\nexport const MESSAGE_SENDER = {\n    SYSTEM: \"system\",\n    CUSTOMER: \"customer\",\n    ADMIN: \"admin\",\n    CHATBOT: \"chatbot\",\n};\n\nexport const default_messages = [\n    {\n        sender: MESSAGE_SENDER.CHATBOT,\n        type: MESSAGE_TYPES.TEXT,\n        inputLock: false,\n        quickReply: [],\n        skipLS: false,\n        send_variable_to_apiai: false,\n        sendVariableToLS: false,\n        variable_name: '',\n        delay: 0,\n        payload: {\n            text: \"Hi, I'm ADI, Your Personal DishTV Assistant.\"\n        },\n        timestamp: new Date(),\n    },\n    {\n        sender: MESSAGE_SENDER.CHATBOT,\n        inputLock: false,\n        skipLS: false,\n        send_variable_to_apiai: false,\n        sendVariableToLS: false,\n        variable_name: '',\n        quickReplies: [],\n        type: MESSAGE_TYPES.TEXT_WITH_BUTTONS,\n        delay: 0,\n        payload: {\n            title: \"\",\n            subtitle: \"What can I help you with today?\",\n            buttons: [\n                {\n                    type: BUTTON_TYPES.DEFAULT,\n                    text: \"Recharge My Dish TV\",\n                    url: \"\"\n                },\n                {\n                    type: BUTTON_TYPES.DEFAULT,\n                    text: \"Recharge Offers\",\n                    url: \"\"\n                },\n                {\n                    type: BUTTON_TYPES.DEFAULT,\n                    text: \"Current Balance\",\n                    url: \"\"\n                },\n                {\n                    type: BUTTON_TYPES.DEFAULT,\n                    text: \"Other Queries\",\n                    url: \"\"\n                },\n            ]\n        },\n        timestamp: new Date(),\n    },\n    // {\n\n    //     sender: MESSAGE_SENDER.CHATBOT,\n    //     inputLock: false,\n    //     skipLS: false,\n    //     send_variable_to_apiai: false,\n    //     sendVariableToLS: false,\n    //     variable_name: '',\n    //     quickReplies: [],\n    //     type: MESSAGE_TYPES.CHECKBOX_WITH_MEDIA,\n    //     delay: 0,\n    //     payload: {\n    //         title: \"Ori Serve\",\n    //         subtitle: \"Please Select following options and proceed\",\n    //         options: [{\n    //             \"value\": \"Banking\",\n    //             \"label\": \"Banking\"\n    //         }, {\n    //             \"value\": \"Real Estate\",\n    //             \"label\": \"Real Estate\"\n    //         }, {\n    //             \"value\": \"Education\",\n    //             \"label\": \"Education\"\n    //         }, {\n    //             \"value\": \"Health\",\n    //             \"label\": \"Health\"\n    //         }, {\n    //             \"value\": \"Consumer Goods\",\n    //             \"label\": \"Consumer Goods\"\n    //         }, {\n    //             \"value\": \"Entertainment\",\n    //             \"label\": \"Entertainment\"\n    //         }, {\n    //             \"value\": \"Tourism\",\n    //             \"label\": \"Tourism\"\n    //         }],\n    //         buttons: [\n    //             {\n    //                 type: BUTTON_TYPES.CUSTOM,\n    //                 subtype: BUTTON_SUB_TYPES.CHECKBOX_SUBMIT,\n    //                 text: \"Submit\",\n    //                 relayData: {\n    //                     \"entity\": \"dndCategories\"\n    //                 }\n    //             },\n    //             {\n    //                 type: BUTTON_TYPES.DEFAULT,\n    //                 text: \"Cancel\",\n    //                 url: \"\"\n    //             },\n    //         ]\n    //     },\n    //     timestamp: new Date()\n    // }\n];\n\nexport const android_default_messages = [\n    {\n        sender: MESSAGE_SENDER.CHATBOT,\n        type: MESSAGE_TYPES.TEXT,\n        inputLock: false,\n        quickReply: [],\n        skipLS: false,\n        send_variable_to_apiai: false,\n        sendVariableToLS: false,\n        variable_name: '',\n        delay: 0,\n        payload: {\n            text: \"Hi, I'm ADI, Your Personal DishTV Assistant.\"\n        },\n        timestamp: new Date(),\n    },\n    {\n        sender: MESSAGE_SENDER.CHATBOT,\n        inputLock: false,\n        skipLS: false,\n        send_variable_to_apiai: false,\n        sendVariableToLS: false,\n        variable_name: '',\n        quickReplies: [],\n        type: MESSAGE_TYPES.TEXT_WITH_BUTTONS,\n        delay: 0,\n        payload: {\n            title: \"\",\n            subtitle: \"What can I help you with today?\",\n            buttons: [\n                {\n                    type: BUTTON_TYPES.DEFAULT,\n                    text: \"My DishTV is not working\",\n                    url: \"\"\n                },\n                {\n                    type: BUTTON_TYPES.DEFAULT,\n                    text: \"Recharge Offers\",\n                    url: \"\"\n                },\n                {\n                    type: BUTTON_TYPES.DEFAULT,\n                    text: \"Current Balance\",\n                    url: \"\"\n                },\n                {\n                    type: BUTTON_TYPES.DEFAULT,\n                    text: \"Package details\",\n                    url: \"\"\n                },\n                {\n                    type: BUTTON_TYPES.DEFAULT,\n                    text: \"Other Queries\",\n                    url: \"\"\n                },\n            ],\n\n        },\n        timestamp: new Date()\n    }\n];","const actionTypes = {\n    /* -------------- page_details ------------------ */\n    \n    DEVICE_DATA_LOADED: \"DEVICE_DATA_LOADED\",\n    ENABLE_ADSTER_BOT: \"ENABLE_ADSTER_BOT\",\n\n    /* --------------chatbot_details----------------- */\n\n    UPDATE_STATE: \"UPDATE_STATE\",\n    UPDATE_END_CHAT: \"UPDATE_END_CHAT\",\n    MAKE_SOCKET_CONNECTION: \"MAKE_SOCKET_CONNECTION\",\n    SOCKET_DISCONNECT: \"SOCKET_DISCONNECT\",\n    BOT_POPUP_REQUEST: \"BOT_POPUP_REQUEST\",\n    EMIT_NEW_MESSAGE: \"EMIT_NEW_MESSAGE\",\n    EMIT_CUSTOM_EVENT: \"EMIT_CUSTOM_EVENT\",\n    MESSAGE_VOTING: \"MESSAGE_VOTING\",\n    RESET_CHAT: \"RESET_CHAT\",\n    SEND_FEEDBACK: \"SEND_FEEDBACK\",\n    UPDATE_TYPING_INFO: \"UPDATE_TYPING_INFO\",\n    UPDATE_MESSAGE: \"UPDATE_MESSAGE\",\n    MESSAGE_SEEN: \"MESSAGE_SEEN\",\n\n    \n\n    UPDATE_PSID: \"UPDATE_PSID\",\n    HANDLE_CHATBOT_INTERFACE: \"HANDLE_CHATBOT_INTERFACE\",\n    SOCKET_CONNECTED: \"SOCKET_CONNECTED\",\n    SOCKET_CONNECT_ERROR: \"SOCKET_CONNECT_ERROR\",\n    SOCKET_ERROR: \"SOCKET_ERROR\",\n    PUSH_RESPONSE_MESSAGE: \"PUSH_RESPONSE_MESSAGE\",\n    PUSH_SENDER_MESSAGE: \"PUSH_SENDER_MESSAGE\",\n    SET_DEFAULT_STATE: \"SET_DEFAULT_STATE\",\n    SHOW_TYPING: \"SHOW_TYPING\",\n    CLEAR_UNSEEN_MESSAGES: \"CLEAR_UNSEEN_MESSAGES\",\n    GET_WEBSITE_DATA: \"GET_WEBSITE_DATA\",\n    UPDATE_FILE_UPLOAD_MESSAGE: \"UPDATE_FILE_UPLOAD_MESSAGE\",\n};\n\nexport default actionTypes;","import actionTypes from '../actiontypes';\nimport { getLocalMessage } from '../../config/utils';\n\nexport const updateState = (key, payload) => {\n  return {\n    type: actionTypes.UPDATE_STATE,\n    payload,\n    key\n  }\n};\n\nexport const updateEndChat = payload => {\n  return {\n    type: actionTypes.UPDATE_END_CHAT,\n    payload,\n  }\n};\n\nexport const makeSocketConnection = () => {\n  return {\n    type: actionTypes.MAKE_SOCKET_CONNECTION,\n  }\n};\n\nexport const socketDisconnect = () => {\n  return {\n    type: actionTypes.SOCKET_DISCONNECT,\n  };\n};\n\nexport const handleBotPopupRequest = payload => {\n  return {\n    type: actionTypes.BOT_POPUP_REQUEST,\n    payload\n  };\n};\n\nexport const emitCustomEvent = (event, payload, callback) => {\n  return {\n    type: actionTypes.EMIT_CUSTOM_EVENT,\n    payload,\n    event,\n    callback\n  };\n};\n\nexport const emitNewMessageToServer = payload => {\n  return {\n    type: actionTypes.EMIT_NEW_MESSAGE,\n    payload\n  };\n};\n\nexport const pushSenderMessage = message => {\n  return {\n    type: actionTypes.PUSH_SENDER_MESSAGE,\n    payload: { message },\n  };\n};\n\nexport const onMessageVoting = payload => {\n  return {\n    type: actionTypes.MESSAGE_VOTING,\n    payload\n  };\n};\n\nexport const resetChat = (payload, callback) => {\n  return {\n    type: actionTypes.RESET_CHAT,\n    payload,\n    callback\n  };\n};\n\nexport const sendFeedback = (payload, callback) => {\n  return {\n    type: actionTypes.SEND_FEEDBACK,\n    payload,\n    callback\n  };\n};\n\nexport const handleChatbotInterface = payload => {\n  return {\n    type: actionTypes.HANDLE_CHATBOT_INTERFACE,\n    payload,\n  };\n};\n\nexport const setDefaultState = () => {\n  let payload = {\n    messages: getLocalMessage(),\n  };\n  return {\n    type: actionTypes.SET_DEFAULT_STATE,\n    payload,\n  };\n};\n\nexport const updateFileUploadMessage = (payload) => {\n  return {\n    type: actionTypes.UPDATE_FILE_UPLOAD_MESSAGE,\n    payload\n  };\n};\n","import io from 'socket.io-client';\n\nimport { EVENTS, MESSAGE_READ_STATUS } from '../../config/constants';\nimport { getSocketUrl, chatbot_setting, chatbot_client_info } from '../../config/urls';\nimport { log, getCookie, getDefaultMessages, uniqueId } from '../../config/utils';\nimport { updateState, emitCustomEvent } from './actions';\nimport actionTypes from '../actiontypes';\n\nconst registerSocketListener = (store, socket) => {\n  socket.on(EVENTS.CONNECT, () => {\n    log('socket connected', socket);\n    const chat_details = store.getState().chat_details;\n    store.dispatch(updateState('is_socket_connected', socket.connected));\n    const default_messages = getDefaultMessages();\n    if (chatbot_setting.auto_emit_response.enable && chat_details.messages.length === default_messages.length) {\n      const data = {\n        ...chatbot_setting.auto_emit_response.payload,\n        session_id: socket.io.engine.id,\n        current_session_id: socket.io.engine.id,\n        sender_id: chatbot_client_info.sender_id,\n        navigator_userAgent: navigator.userAgent,\n        navigator_platform: navigator.platform,\n        variable_name: chat_details.variable_name,\n        send_variable_to_apiai: chat_details.send_variable_to_apiai,\n        sendVariableToLS: chat_details.sendVariableToLS,\n        skipLS: chat_details.skipLS\n      };\n      console.log('first emit data', data);\n      socket.emit(EVENTS.NEW_MESSAGE, data);\n    }\n    if (chat_details.psid) {\n      const payload = {\n        clientPsid: chat_details.psid,\n        senderPsid: chat_details.psid,\n      };\n      store.dispatch(emitCustomEvent(EVENTS.MESSAGE_SEEN, payload));\n    }\n  });\n\n  socket.on(EVENTS.CONNECT_ERROR, error => {\n    log('socket connect error', error);\n    store.dispatch(updateState('is_socket_connected', socket.connected));\n  });\n\n  socket.on(EVENTS.ERROR, error => {\n    log(' socket error', error);\n    store.dispatch(updateState('is_socket_connected', socket.connected));\n  });\n\n  socket.on(EVENTS.DISCONNECT, reason => {\n    if (reason === 'io server disconnect') {\n      socket.connect();\n    }\n    store.dispatch(updateState('is_socket_connected', socket.connected));\n  });\n\n  socket.on(EVENTS.RESPONSE, res => {\n    log('response', res);\n    const chat_details = store.getState().chat_details;\n    if (res && res.psid && res.psid === chat_details.psid) {\n      const payload = {\n        message: res.result && res.result.bot_messages && res.result.bot_messages.length > 0 ? res.result.bot_messages[0] : null\n      };\n      if (payload.message) {\n        payload.message.cmid = uniqueId();\n        if (res.chatlogId) {\n          const updated_message_data = {\n            readStatus: MESSAGE_READ_STATUS.DELIVERED,\n            clientPsid: chat_details.psid,\n            senderPsid: chat_details.psid,\n            chatlogId: res.chatlogId\n          };\n          socket.emit(EVENTS.UPDATE_ADMIN_MESSAGE, updated_message_data, err => {\n            if (!err && document.visibilityState === 'visible' && chat_details.is_chat_open) {\n              const message_seen_payload = {\n                clientPsid: chat_details.psid,\n                senderPsid: chat_details.psid,\n              };\n              socket.emit(EVENTS.MESSAGE_SEEN, message_seen_payload);\n            }\n          });\n        }\n        store.dispatch({\n          type: actionTypes.PUSH_RESPONSE_MESSAGE,\n          payload\n        });\n      } else {\n        log('response data format is not correct', res);\n      }\n    }\n  });\n\n  socket.on(EVENTS.GET_WEBSITE_DATA, data => {\n    const chat_details = store.getState().chat_details;\n    if (data && data.length > 0) {\n      const websiteData = {};\n      data.forEach(item => {\n        if (item.source === 'cookie') {\n          websiteData[item.newKey] = getCookie(item.key);\n        } else if (item.source === 'localstorage') {\n          websiteData[item.newKey] = localStorage.getItem(item.key);\n        }\n      });\n      socket.emit(EVENTS.WEBSITE_DATA, { websiteData, psid: chat_details.psid });\n    }\n  });\n\n  socket.on(EVENTS.TYPING_STATUS, data => {\n    const chat_details = store.getState().chat_details;\n    if (data && data.typingInfo && data.typingInfo.senderPsid !== chat_details.psid) {\n      store.dispatch({\n        type: actionTypes.UPDATE_TYPING_INFO,\n        payload: data.typingInfo\n      });\n    }\n  });\n\n  socket.on(EVENTS.UPDATE_MESSAGE, data => {\n    // log('update message event', data);\n    const chat_details = store.getState().chat_details;\n    if (data && data.updateChatlogId && data.updateChatlogId.changedValue && data.updateChatlogId.psid && data.updateChatlogId.psid === chat_details.psid) {\n      store.dispatch({\n        type: actionTypes.UPDATE_MESSAGE,\n        payload: data.updateChatlogId,\n        key: 'cmid'\n      });\n    } else if (data && data.updatedCustomerMessage && data.updatedCustomerMessage.changedValue && data.updatedCustomerMessage.clientPsid === chat_details.psid) {\n      // log('dispatch update customer message');\n      store.dispatch({\n        type: actionTypes.UPDATE_MESSAGE,\n        payload: data.updatedCustomerMessage,\n        key: 'chatlogId'\n      });\n    } else if (data && data.messageSeen && data.messageSeen.clientPsid === chat_details.psid && data.messageSeen.senderPsid !== chat_details.psid) {\n      store.dispatch({\n        type: actionTypes.MESSAGE_SEEN,\n      });\n    }\n  });\n\n  socket.on(EVENTS.END_CONVERSATION, data => {\n    log('end conversation listener', data);\n    const chat_details = store.getState().chat_details;\n    if (data.psid === chat_details.psid) {\n      store.dispatch({\n        type: actionTypes.UPDATE_END_CHAT,\n        payload: {\n          visible: true,\n          show_resolved_card: true,\n        }\n      });\n    }\n  });\n};\n\nconst middleware = () => {\n  let socket = null;\n  return store => next => action => {\n    switch (action.type) {\n      case actionTypes.MAKE_SOCKET_CONNECTION: {\n        if (socket !== null) {\n          socket.close();\n        }\n        const socket_url = getSocketUrl();\n        socket = io(socket_url);\n        registerSocketListener(store, socket);\n        break;\n      }\n\n      case actionTypes.EMIT_CUSTOM_EVENT: {\n        if (socket && action.event) {\n          log('emit custom event', action.payload);\n          if (action.callback)\n            socket.emit(action.event, action.payload, action.callback);\n          else\n            socket.emit(action.event, action.payload);\n        }\n        break;\n      }\n\n      case actionTypes.EMIT_NEW_MESSAGE: {\n        if (socket) {\n          action.payload.session_id = socket.io.engine.id;\n          action.payload.current_session_id = socket.io.engine.id;\n          socket.emit(EVENTS.NEW_MESSAGE, action.payload, (err, res) => {\n            if (err) {\n              log('emit new message event error', err);\n              const payload = {\n                cmid: action.payload.cmid,\n                changedValue: {\n                  readStatus: MESSAGE_READ_STATUS.FAILED\n                }\n              };\n              store.dispatch({\n                type: actionTypes.UPDATE_MESSAGE,\n                payload,\n                key: 'cmid'\n              });\n            } else if (!err && res && res.data && res.data.cmid && res.data.changedValue) {\n              store.dispatch({\n                type: actionTypes.UPDATE_MESSAGE,\n                payload: res.data,\n                key: 'cmid',\n              });\n            }\n          });\n        }\n        break;\n      }\n\n      case actionTypes.BOT_POPUP_REQUEST: {\n        if (socket) {\n          socket.emit(EVENTS.BOT_AUTO_POPUP_REQUEST, action.payload, (err, res) => {\n            if (!err && res && res.data && res.data.displayMessage) {\n              log('bot auto popup request response', res);\n              const message = res.data.displayMessage;\n              store.dispatch({\n                type: actionTypes.PUSH_SENDER_MESSAGE,\n                payload: { message },\n              });\n            } else {\n              log('bot auto popup request error', err);\n            }\n          });\n        }\n        break;\n      }\n\n      case actionTypes.MESSAGE_VOTING: {\n        if (socket) {\n          socket.emit(EVENTS.CHATLOG_FEEDBACK, action.payload, res => {\n            log('chatlog feedback res', res);\n            if (!res.error && res.data && res.data.chatlogId && res.data.voteType) {\n              const payload = {\n                chatlogId: res.data.chatlogId,\n                changedValue: { voteType: res.data.voteType },\n              };\n              store.dispatch({\n                type: actionTypes.UPDATE_MESSAGE,\n                key: 'chatlogId',\n                payload\n              });\n            } else {\n              log('chatlog feedback event request error');\n            }\n          });\n        }\n        break;\n      }\n\n      case actionTypes.RESET_CHAT: {\n        if (socket) {\n          socket.emit(EVENTS.RESET_CHAT, action.payload, res => {\n            log('chatlog feedback res', res);\n            if (res.ok) {\n              action.callback();\n            } else if (res.error) {\n              log('reset chat event error');\n            }\n          });\n        }\n        break;\n      }\n\n      case actionTypes.SEND_FEEDBACK: {\n        if (socket) {\n          socket.emit(EVENTS.RECORD_FEEDBACK, action.payload, (err, data) => {\n            if (action.callback) {\n              action.callback(err);\n            }\n          });\n        }\n        break;\n      }\n\n      case actionTypes.SOCKET_DISCONNECT:\n        if (socket !== null) {\n          log('socket disconnected', socket);\n          socket.close();\n        }\n        socket = null;\n        break;\n\n      default:\n        return next(action);\n    }\n  };\n};\n\nexport default middleware();\n","import * as CONSTANTS from '../../config/constants';\nimport { isAndroid, getPsid, getLocalMessage, getLocalUnseenMessage, getLocalChatOpenStatus, getLocalNotificationCount, getDefaultMessages, getDataFromLocalStorage, LOCAL_STORAGE } from '../../config/utils'\n\nconst psid = getPsid();\nconst messages = getLocalMessage();\nconst unseen_messages = getLocalUnseenMessage();\nconst is_chat_open = getLocalChatOpenStatus();\nconst notification_count = getLocalNotificationCount();\nconst default_end_chat = {\n  visible: false,\n  show_confirmation_card: false,\n  show_resolved_card: false,\n  show_form_card: false,\n  form: [],\n  description: null,\n};\n\nconst states = {\n  chat_details: {\n    is_socket_connected: false,\n    is_internet_connected: false,\n    psid,\n    messages: isAndroid() ? getDefaultMessages() : messages,\n    unseen_messages,\n    notification_count,\n    is_chat_open,\n    is_typing: false,\n    typing_text: \"\",\n    quick_replies: messages && messages.length > 0 && messages[messages.length - 1].sender === CONSTANTS.MESSAGE_SENDER.SERVER && messages[messages.length - 1].quickReplies ? messages[messages.length - 1].quickReplies : [],\n    is_input_lock: messages && messages.length > 0 && messages[messages.length - 1].sender === CONSTANTS.MESSAGE_SENDER.SERVER && messages[messages.length - 1].inputLock ? messages[messages.length - 1].inputLock : false,\n    input_lock_text: messages && messages.length > 0 && messages[messages.length - 1].sender === CONSTANTS.MESSAGE_SENDER.SERVER && messages[messages.length - 1].inputLockMessage ? messages[messages.length - 1].inputLockMessage : \"please select any option to proceed\",\n    skipLS: messages && messages.length > 0 && messages[messages.length - 1].sender === CONSTANTS.MESSAGE_SENDER.SERVER && messages[messages.length - 1].skipLS ? messages[messages.length - 1].skipLS : false,\n    send_variable_to_apiai: messages && messages.length > 0 && messages[messages.length - 1].sender === CONSTANTS.MESSAGE_SENDER.SERVER && messages[messages.length - 1].send_variable_to_apiai ? messages[messages.length - 1].send_variable_to_apiai : false,\n    sendVariableToLS: messages && messages.length > 0 && messages[messages.length - 1].sender === CONSTANTS.MESSAGE_SENDER.SERVER && messages[messages.length - 1].sendVariableToLS ? messages[messages.length - 1].sendVariableToLS : false,\n    variable_name: messages && messages.length > 0 && messages[messages.length - 1].sender === CONSTANTS.MESSAGE_SENDER.SERVER && messages[messages.length - 1].variable_name ? messages[messages.length - 1].variable_name : '',\n    end_chat: getDataFromLocalStorage(LOCAL_STORAGE.END_CHAT, default_end_chat),\n  },\n};\n\nexport default states;\n","import findLastIndex from 'lodash/findLastIndex';\n\nimport actionTypes from '../actiontypes';\nimport states from './states';\nimport { LOCAL_STORAGE, setDataInLocalStorage } from '../../config/utils';\nimport { MESSAGE_READ_STATUS, MESSAGE_SENDER } from '../../config/constants';\n\nconst chat_details = (state = states.chat_details, action) => {\n  switch (action.type) {\n    case actionTypes.UPDATE_STATE: {\n      return {\n        ...state,\n        [action.key]: action.payload\n      };\n    }\n\n    case actionTypes.UPDATE_END_CHAT: {\n      const end_chat = {\n        ...state.end_chat,\n        ...action.payload\n      };\n      setDataInLocalStorage(LOCAL_STORAGE.END_CHAT, end_chat)\n      return {\n        ...state,\n        end_chat\n      };\n    }\n\n    case actionTypes.HANDLE_CHATBOT_INTERFACE: {\n      localStorage.setItem(LOCAL_STORAGE.IS_CHAT_OPEN, JSON.stringify(action.payload));\n      localStorage.removeItem(LOCAL_STORAGE.UNSEEN_MESSAGES);\n      localStorage.removeItem(LOCAL_STORAGE.NOTIFICATION_COUNT);\n      return {\n        ...state,\n        is_chat_open: action.payload,\n        notification_count: action.payload ? 0 : state.notification_count,\n        unseen_messages: []\n      };\n    }\n\n    case actionTypes.PUSH_SENDER_MESSAGE: {\n      localStorage.setItem(LOCAL_STORAGE.MESSAGES(), JSON.stringify([...state.messages, action.payload.message]));\n      let unseen_messages = [...state.unseen_messages];\n      let notification_count = state.notification_count;\n      if (!state.is_chat_open) {\n        unseen_messages = [...state.unseen_messages, action.payload.message];\n        notification_count = 0;\n        localStorage.setItem(LOCAL_STORAGE.UNSEEN_MESSAGES, JSON.stringify(unseen_messages));\n        localStorage.setItem(LOCAL_STORAGE.NOTIFICATION_COUNT, JSON.stringify(notification_count));\n      }\n\n      return {\n        ...state,\n        unseen_messages,\n        notification_count,\n        messages: [...state.messages, action.payload.message],\n        skipLS: false,\n        send_variable_to_apiai: false,\n        sendVariableToLS: false,\n        variable_name: '',\n        quick_replies: [],\n        is_input_lock: false,\n      };\n    }\n\n    case actionTypes.PUSH_RESPONSE_MESSAGE: {\n      localStorage.setItem(LOCAL_STORAGE.MESSAGES(), JSON.stringify([...state.messages, action.payload.message]));\n      let notification_count = state.notification_count;\n      let unseen_messages = [...state.unseen_messages];\n      if (!state.is_chat_open) {\n        notification_count++;\n        unseen_messages = [...state.unseen_messages, action.payload.message];\n        localStorage.setItem(LOCAL_STORAGE.UNSEEN_MESSAGES, JSON.stringify(unseen_messages));\n        localStorage.setItem(LOCAL_STORAGE.NOTIFICATION_COUNT, JSON.stringify(notification_count));\n      }\n\n      return {\n        ...state,\n        notification_count,\n        unseen_messages,\n        messages: [...state.messages, action.payload.message],\n        quick_replies: action.payload.message.quickReplies ? action.payload.message.quickReplies : [],\n        is_input_lock: action.payload.message.inputLock ? action.payload.message.inputLock : false,\n        input_lock_text: action.payload.message.inputLockMessage ? action.payload.message.inputLockMessage : \"please select any option to proceed\",\n        skipLS: action.payload.message.skipLS,\n        sendVariableToLS: action.payload.message.sendVariableToLS,\n        send_variable_to_apiai: action.payload.message.send_variable_to_apiai,\n        variable_name: action.payload.message.variable_name,\n      };\n    }\n\n    case actionTypes.SET_DEFAULT_STATE: {\n      let msg_length = action.payload.messages.length;\n      let messages = action.payload.messages;\n\n      return {\n        ...state,\n        messages: messages,\n        skipLS: messages && msg_length > 0 && messages[msg_length - 1].skipLS ? messages[msg_length - 1].skipLS : false,\n        send_variable_to_apiai: messages && msg_length > 0 && messages[msg_length - 1].send_variable_to_apiai ? messages[msg_length - 1].send_variable_to_apiai : false,\n        sendVariableToLS: messages && msg_length > 0 && messages[msg_length - 1].sendVariableToLS ? messages[msg_length - 1].sendVariableToLS : false,\n        variable_name: messages && msg_length > 0 && messages[msg_length - 1].variable_name ? messages[msg_length - 1].variable_name : '',\n        quick_replies: messages && msg_length > 0 && messages[msg_length - 1].quickReplies ? messages[msg_length - 1].quickReplies : [],\n        is_input_lock: messages && msg_length > 0 && messages[msg_length - 1].inputLock ? messages[msg_length - 1].inputLock : false,\n        input_lock_text: messages && msg_length > 0 && messages[msg_length - 1].inputLockMessage ? messages[msg_length - 1].inputLockMessage : \"please select any option to proceed\",\n        is_typing: false,\n        typing_text: \"\",\n      };\n    }\n\n    case actionTypes.UPDATE_TYPING_INFO: {\n      return {\n        ...state,\n        is_typing: action.payload.isTyping,\n        typing_text: action.payload.typingMessage ? action.payload.typingMessage : \"\"\n      };\n    }\n\n    case actionTypes.UPDATE_FILE_UPLOAD_MESSAGE: {\n      let messages = [...state.messages];\n      let index = -1;\n      index = findLastIndex(messages, message => message.chatlogId === action.payload.message.chatlogId);\n      if (index !== -1) {\n        messages = [\n          ...messages.slice(0, index),\n          {\n            ...messages[index],\n            payload: {\n              ...messages[index].payload,\n              ...action.payload.data,\n            }\n          },\n          ...messages.slice(index + 1)\n        ];\n        localStorage.setItem(LOCAL_STORAGE.MESSAGES(), JSON.stringify(messages));\n      }\n      return {\n        ...state,\n        messages,\n      };\n    }\n\n    case actionTypes.UPDATE_MESSAGE: {\n      let messages = [...state.messages];\n      let index = -1;\n      index = findLastIndex(messages, message => message[action.key] === action.payload[action.key]);\n      if (index !== -1) {\n        messages = [\n          ...messages.slice(0, index),\n          {\n            ...messages[index],\n            ...action.payload.changedValue,\n          },\n          ...messages.slice(index + 1)\n        ];\n        localStorage.setItem(LOCAL_STORAGE.MESSAGES(), JSON.stringify(messages));\n      }\n      return {\n        ...state,\n        messages,\n      };\n    }\n\n    case actionTypes.MESSAGE_SEEN: {\n      let messages = [...state.messages];\n      for (let i = 0; i < messages.length; i++) {\n        if (messages[i].readStatus === MESSAGE_READ_STATUS.DELIVERED && messages[i].sender === MESSAGE_SENDER.CUSTOMER) {\n          messages[i] = {\n            ...messages[i],\n            readStatus: MESSAGE_READ_STATUS.SEEN,\n          };\n        }\n      }\n      return {\n        ...state,\n        messages,\n      };\n    }\n\n    default:\n      return state;\n  }\n}\n\nexport default chat_details;\n","const states = {\n    page_details: {\n        device_data: {},\n        is_adster_bot: false,\n    }\n};\n\nexport default states;","import { combineReducers } from 'redux';\n\nimport chat_details from './chat_details/reducers';\nimport page_details from './page_details/reducers';\n\nconst rootReducer = combineReducers({\n    chat_details,\n    page_details\n});\n\nexport default rootReducer;","import actionTypes from '../actiontypes';\nimport states from './states';\n\nexport default function page_details(state = states.page_details, action) {\n    switch (action.type) {\n        case actionTypes.DEVICE_DATA_LOADED:\n            return {\n                ...state,\n                device_data: action.payload.device_data\n            };\n\n        case actionTypes.ENABLE_ADSTER_BOT:\n            return {\n                ...state,\n                is_adster_bot: action.payload\n            }; \n\n        default:\n            return state;\n    }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import actionTypes from '../actiontypes';\n\nexport const setDeviceData = device_data => {\n  return {\n    type: actionTypes.DEVICE_DATA_LOADED,\n    payload: {\n      device_data: device_data\n    }\n  };\n}\n\nexport const enableAdsterBot = () => {\n  return {\n    type: actionTypes.ENABLE_ADSTER_BOT,\n    payload: true\n  };\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CloseIcon from 'react-icons/lib/md/close';\nimport ConversationIcon from 'react-icons/lib/fa/comments';\nimport Lottie from 'react-lottie';\n\nimport './index.scss';\n\nimport { chatbot_client_info } from '../../data/config/urls';\n\nclass TriggerChatBot extends React.PureComponent {\n    lottieDefaultOptions = {\n        loop: true,\n        autoplay: true,\n        path: chatbot_client_info.trigger.lottie_path,\n        rendererSettings: {\n            preserveAspectRatio: 'xMidYMid slice'\n        }\n    };\n\n    handleChatInterfaceView = () => {\n        const { is_chat_open, handleSocketConnection } = this.props;\n        handleSocketConnection(!is_chat_open)\n    };\n\n    render() {\n        const { is_chat_open } = this.props;\n\n        return (\n            <div className=\"ori-fixed ori-animated ori-zoom-in oriTriggerChatBotContainer\" onClick={this.handleChatInterfaceView}>\n                {\n                    !is_chat_open && chatbot_client_info.trigger.lottie_visibility &&\n                    <Lottie options={this.lottieDefaultOptions} height={chatbot_client_info.trigger.lottie_icon_height} width={chatbot_client_info.trigger.lottie_icon_width} />\n                }\n                {\n                    chatbot_client_info.trigger.visibility && !is_chat_open &&\n                    <div className=\"ori-animated ori-pulse ori-infinite\" style={{ height: `${chatbot_client_info.trigger.icon_height}px`, animationDuration: `${chatbot_client_info.trigger.animation_duration}ms` }}>\n                        <img src={chatbot_client_info.trigger.icon_url} alt=\"\" className=\"ori-full-parent-height\" />\n                    </div>\n                }\n                {\n                    !chatbot_client_info.trigger.visibility && !chatbot_client_info.trigger.lottie_visibility && !is_chat_open &&\n                    <div className=\"ori-flex-row ori-flex-center triggerIconContainer\">\n                        <ConversationIcon size={30} />\n                    </div>\n                }\n                {\n                    is_chat_open && chatbot_client_info.trigger.show_close_icon &&\n                    <div className=\"ori-flex-row ori-flex-center triggerIconContainer\">\n                        <CloseIcon size={28} />\n                    </div>\n                }\n            </div>\n        );\n    }\n}\n\nTriggerChatBot.propTypes = {\n    is_chat_open: PropTypes.bool.isRequired,\n    handleSocketConnection: PropTypes.func,\n};\n\nexport default TriggerChatBot;\n","import React, { Component, Suspense } from 'react';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport Badge from 'antd/lib/badge';\nimport merge from 'lodash/merge';\nimport SendingIcon from 'react-icons/lib/md/rotate-right';\n\nimport './index.scss';\n\nimport * as chatActions from '../data/redux/chat_details/actions';\nimport * as pageActions from '../data/redux/page_details/actions';\n\nimport { MESSAGE_TYPES, BUTTON_TYPES, BUTTON_SUB_TYPES, MESSAGE_SENDER, MESSAGE_READ_STATUS, EVENTS } from '../data/config/constants';\nimport { chatbot_client_info, chatbot_setting } from '../data/config/urls';\nimport { LOCAL_STORAGE, checkDevice, isAndroid, PLATFORM, getDefaultMessages, uniqueId } from '../data/config/utils';\n\nimport TriggerChatBot from '../components/triggerchatbot';\n\nconst ChatBot = React.lazy(() => import('./chatbot'));\nconst NotificationBot = React.lazy(() => import('./notificationbot'));\n\nclass AppContainer extends Component {\n  constructor(props) {\n    super(props);\n    window.androidObj = function AndroidClass() { };\n    props.actions.setDeviceData(checkDevice.deviceStatus());\n    this.timeout = false;\n\n    this.state = {\n      selected_checkbox_values: [],\n      selected_offer: {\n        offer_id: null,\n        offer_name: null\n      }\n    }\n  }\n\n  componentDidMount() {\n    const { chat_details, actions } = this.props;\n    const android = isAndroid();\n    let self = this;\n    window.bot_popup = this.botPopup;\n    window.addEventListener(\"resize\", () => {\n      clearTimeout(this.timeout);\n      this.timeout = setTimeout(() => {\n        self.props.actions.setDeviceData(checkDevice.deviceStatus());\n      }, 300);\n    });\n    this.handleConnectionChange();\n    window.addEventListener('online', this.handleConnectionChange);\n    window.addEventListener('offline', this.handleConnectionChange);\n    document.addEventListener(\"visibilitychange\", () => {\n      if (document.visibilityState === 'visible' && self.props.chat_details.is_chat_open) {\n        const payload = {\n          clientPsid: self.props.chat_details.psid,\n          senderPsid: self.props.chat_details.psid,\n        };\n        self.props.actions.emitCustomEvent(EVENTS.MESSAGE_SEEN, payload);\n      }\n    });\n\n    if (android) {\n      window.androidObj.updateFromAndroid = (type, data) => {\n        if (type.toLowerCase() === PLATFORM.ANDROID) {\n          localStorage.setItem(LOCAL_STORAGE.ANDROID, JSON.stringify(true));\n        } else if (type.toLowerCase() === 'psid') {\n          data = JSON.parse(data);\n          if (data.psid) {\n            localStorage.setItem(LOCAL_STORAGE.PSID, data.psid);\n            actions.updateState('psid', data.psid);\n          }\n          if (data.params) {\n            localStorage.setItem(LOCAL_STORAGE.APP_PARAMS, JSON.stringify(data.params));\n          }\n          if (!chat_details.is_socket_connected) {\n            actions.makeSocketConnection();\n            actions.setDefaultState();\n          }\n        }\n      }\n      actions.handleChatbotInterface(true);\n    } else if (!chat_details.is_socket_connected) {\n      let last_emit = localStorage.getItem(LOCAL_STORAGE.LAST_EMIT) ? JSON.parse(localStorage.getItem(LOCAL_STORAGE.LAST_EMIT)) : null;\n\n      if (last_emit) {\n        let current_time = new Date().getTime();\n        let time_gap = (current_time - last_emit) / 1000;\n        if (time_gap < chatbot_setting.automate_connection_time) {\n          actions.makeSocketConnection();\n        } else {\n          actions.handleChatbotInterface(false);\n        }\n        if (time_gap > chatbot_setting.automate_reset_chat_time) {\n          const default_messages = getDefaultMessages();\n          localStorage.setItem(LOCAL_STORAGE.MESSAGES, JSON.stringify(default_messages));\n          actions.setDefaultState();\n        }\n      } else {\n        actions.handleChatbotInterface(false);\n      }\n      if (chatbot_setting.adster_bot.visibility) {\n        const query_params = new URLSearchParams(window.location.search);\n        if (query_params.get(chatbot_setting.adster_bot.query_param_key)) {\n          this.handleSocketConnection(true);\n          actions.enableAdsterBot();\n        }\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    const { actions } = this.props;\n    window.removeEventListener('online', this.handleConnectionChange);\n    window.removeEventListener('offline', this.handleConnectionChange);\n    actions.socketDisconnect();\n  }\n\n  handleConnectionChange = () => {\n    const { actions } = this.props;\n    const condition = navigator.onLine ? 'online' : 'offline';\n    if (condition === 'online') {\n      const webPing = setInterval(\n        () => {\n          fetch('//google.com', {\n            mode: 'no-cors',\n          }).then(() => {\n            actions.updateState('is_internet_connected', true);\n            clearInterval(webPing)\n          }).catch(() => actions.updateState('is_internet_connected', false))\n        }, 1500);\n      return;\n    }\n    return actions.updateState('is_internet_connected', false);\n  }\n\n  botPopup = (case_data, params) => {\n    const { chat_details, actions } = this.props;\n    let payload = {\n      case: case_data,\n      params: params,\n      psid: chat_details.psid\n    };\n    actions.handleBotPopupRequest(payload);\n  };\n\n  handleSocketConnection = bool => {\n    const { chat_details, actions } = this.props;\n    const android = isAndroid();\n    actions.handleChatbotInterface(bool);\n    if (bool && chat_details.is_socket_connected) {\n      const payload = {\n        clientPsid: chat_details.psid,\n        senderPsid: chat_details.psid,\n      };\n      actions.emitCustomEvent(EVENTS.MESSAGE_SEEN, payload);\n    }\n    if (bool && !chat_details.is_socket_connected && !android) {\n      actions.makeSocketConnection();\n    }\n  };\n\n  handleOfferSelection = (offer_id, offer_name) => {\n    this.setState({\n      selected_offer: {\n        ...this.state.selected_offer,\n        offer_id,\n        offer_name\n      }\n    });\n  };\n\n  setDefaultOfferState = () => {\n    this.setState({\n      selected_offer: {\n        ...this.state.selected_offer,\n        offer_id: null,\n        offer_name: null,\n      }\n    });\n  };\n\n  onChangeCheckbox = (selected_checkbox_values) => {\n    this.setState({ selected_checkbox_values });\n  };\n\n  emitResponseToServer = response => {\n    const { chat_details, actions } = this.props;\n    const android = isAndroid();\n    const data = {\n      ...response,\n      sender_id: chatbot_client_info.sender_id,\n      navigator_userAgent: navigator.userAgent,\n      navigator_platform: navigator.platform,\n      variable_name: chat_details.variable_name,\n      send_variable_to_apiai: chat_details.send_variable_to_apiai,\n      sendVariableToLS: chat_details.sendVariableToLS,\n      skipLS: chat_details.skipLS\n    };\n    if (android && localStorage.getItem(LOCAL_STORAGE.APP_PARAMS)) {\n      data.lockedParams = JSON.parse(localStorage.getItem(LOCAL_STORAGE.APP_PARAMS));\n      localStorage.removeItem(LOCAL_STORAGE.APP_PARAMS);\n    }\n    actions.emitNewMessageToServer(data);\n    let emit_time = new Date().getTime();\n    localStorage.setItem(LOCAL_STORAGE.LAST_EMIT, JSON.stringify(emit_time));\n\n  };\n\n  pushSenderNewMsgToChatbot = (type, data) => {\n    const { actions } = this.props;\n    const user_message = {\n      type,\n      sender_id: chatbot_client_info.sender_id,\n      timestamp: new Date(),\n      sender: MESSAGE_SENDER.CUSTOMER,\n      readStatus: MESSAGE_READ_STATUS.SENDING,\n      ...data,\n    };\n    actions.pushSenderMessage(user_message);\n  };\n\n  sendTextToServer = text => {\n    const cmid = uniqueId();\n    const response = {\n      type: MESSAGE_TYPES.TEXT,\n      text,\n      cmid\n    };\n    const data = {\n      payload: { text },\n      cmid\n    };\n    this.emitResponseToServer(response);\n    this.pushSenderNewMsgToChatbot(MESSAGE_TYPES.TEXT, data);\n  };\n\n  handleButtonSubTypes = data => {\n    switch (data.button.subtype) {\n      case BUTTON_SUB_TYPES.DISH_OFFERS:\n        const { selected_offer } = this.state;\n        const cmid = uniqueId();\n        const response = {\n          type: MESSAGE_TYPES.TEXT,\n          text: selected_offer.offer_id,\n          cmid\n        };\n        const data = {\n          payload: { text: selected_offer.offer_name },\n          cmid,\n        };\n        this.pushSenderNewMsgToChatbot(MESSAGE_TYPES.TEXT, data);\n        this.emitResponseToServer(response);\n        if (selected_offer.offer_id) {\n          this.setDefaultOfferState();\n        }\n        break;\n\n      case BUTTON_SUB_TYPES.CHECKBOX_SUBMIT:\n        if (data.message && data.message.payload && data.message.payload.options) {\n          const { selected_checkbox_values } = this.state;\n          const selected_checkbox_items = data.message.payload.options.filter((item) => {\n            return selected_checkbox_values.findIndex(value => value === item.value) !== -1;\n          });\n          if (selected_checkbox_items.length > 0) {\n            const cmid = uniqueId();\n            const response = {\n              type: MESSAGE_TYPES.LIST,\n              list: selected_checkbox_items,\n              relayData: data.button.relayData,\n              cmid\n            };\n            const obj = {\n              payload: { list: selected_checkbox_items },\n              cmid,\n            };\n            this.pushSenderNewMsgToChatbot(MESSAGE_TYPES.LIST, obj);\n            this.emitResponseToServer(response);\n          }\n        }\n        break;\n\n      default:\n        return;\n    }\n  };\n\n  handleMsgBtnClick = data => {\n    if (data.button) {\n      switch (data.button.type) {\n        case BUTTON_TYPES.LINK:\n          if (data.button.url && data.button.url.trim().length > 0) {\n            const android = localStorage.getItem(LOCAL_STORAGE.ANDROID) ? JSON.parse(localStorage.getItem(LOCAL_STORAGE.ANDROID)) : false;\n            if (android) {\n              window.androidObj.textToAndroid(JSON.stringify(data));\n            } else {\n              window.open(data.button.url, '_blank');\n            }\n          }\n          break;\n\n        case BUTTON_TYPES.CUSTOM:\n          if (data.button.subtype) {\n            this.handleButtonSubTypes(data);\n          }\n          break;\n\n        case BUTTON_TYPES.CUSTOM_SOCKET_EVENT: {\n          const cmid = uniqueId();\n          if (data.button.text) {\n            const obj = {\n              payload: { text: data.button.text },\n              cmid\n            };\n            this.pushSenderNewMsgToChatbot(MESSAGE_TYPES.TEXT, obj);\n          }\n\n          if (data.button.eventName) {\n            let payload = {\n              relayData: merge({}, data.message.relayData, data.button.relayData),\n              text: data.message.payload.title,\n              type: data.message.payload && data.message.payload.expectedClientResponseType ? data.message.payload.expectedClientResponseType : MESSAGE_TYPES.TEXT,\n              cmid\n            };\n            this.props.actions.emitCustomEvent(data.button.eventName, payload);\n          }\n        }\n          break;\n\n        case BUTTON_TYPES.POST_BACK_RESPONSE: {\n          const cmid = uniqueId();\n          if (data.button.text) {\n            const obj = {\n              payload: { text: data.button.text },\n              cmid\n            };\n            this.pushSenderNewMsgToChatbot(MESSAGE_TYPES.TEXT, obj);\n          }\n          if (data.button.postbackRes) {\n            const response = {\n              type: MESSAGE_TYPES.TEXT,\n              text: data.button.postbackRes,\n              cmid\n            };\n            this.emitResponseToServer(response);\n          }\n        }\n          break;\n\n        default:\n          if (data.button.text) {\n            this.sendTextToServer(data.button.text);\n          }\n      }\n    }\n  };\n\n  handleFileUpload = (data, message) => {\n    if (data && data.fileUrl && data.file) {\n      console.log('upload data', data);\n      if (message) {\n        const payload = {\n          data,\n          message,\n        };\n        this.props.actions.updateFileUploadMessage(payload);\n      }\n      const cmid = uniqueId();\n      const response = {\n        type: MESSAGE_TYPES.FILE,\n        relayData: message && message.payload ? message.payload.relayData : null,\n        fileBase64: data.fileUrl,\n        cmid\n      };\n      this.emitResponseToServer(response);\n      const obj = {\n        payload: { title: data.file.name, imageUrl: data.fileUrl },\n        cmid\n      };\n      this.pushSenderNewMsgToChatbot(MESSAGE_TYPES.IMAGE_WITH_BUTTONS, obj);\n    }\n  };\n\n  render() {\n    const { page_details, chat_details, actions } = this.props;\n    return (\n      <div className=\"ori-app-container ori-ant-design-container oriAppContainer\">\n        <Badge count={chat_details.notification_count} overflowCount={9} className=\"ori-animated ori-fade-in notificationBadge\">\n          <TriggerChatBot is_chat_open={chat_details.is_chat_open} handleSocketConnection={this.handleSocketConnection} />\n        </Badge>\n        <Suspense fallback={\n          <div>\n            <SendingIcon className=\"ori-l-mrgn-5 ori-animated ori-rotate ori-infinite\" />\n          </div>\n        }\n        >\n          {\n            chat_details.is_chat_open &&\n            <ChatBot is_adster_bot={page_details.is_adster_bot} chat_details={chat_details} actions={actions} sendTextToServer={this.sendTextToServer} handleMsgBtnClick={this.handleMsgBtnClick} handleFileUpload={this.handleFileUpload} handleOfferSelection={this.handleOfferSelection} onChangeCheckbox={this.onChangeCheckbox} />\n          }\n          {\n            chatbot_setting.notification_bot.visibility && !chat_details.is_chat_open && chat_details.unseen_messages.length > 0 &&\n            <NotificationBot page_details={page_details} chat_details={chat_details} actions={actions} sendTextToServer={this.sendTextToServer} handleMsgBtnClick={this.handleMsgBtnClick} handleFileUpload={this.handleFileUpload} handleOfferSelection={this.handleOfferSelection} stack_view={chatbot_setting.notification_bot.stack_view} onChangeCheckbox={this.onChangeCheckbox} />\n          }\n        </Suspense>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    chat_details: state.chat_details,\n    page_details: state.page_details\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    actions: bindActionCreators(Object.assign({}, pageActions, chatActions), dispatch)\n  };\n};\n\nAppContainer.propTypes = {\n  actions: PropTypes.object,\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node])\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AppContainer);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\n// import { init } from '@sentry/browser';\n\nimport createStore from './data/redux/store';\nimport * as serviceWorker from './serviceWorker';\n\n// import { chatbot_client_info } from './data/config/urls';\n\nimport './data/styles/index.scss';\n\nimport AppContainer from './modules';\n\n// init({ dsn: chatbot_client_info.sentry_dsn });\n\nconst store = createStore();\n\nvar x = document.createElement(\"DIV\");\nx.setAttribute(\"id\", \"ori-chatbot-root\");\ndocument.body.appendChild(x);\n\nReactDOM.render(<Provider store={store}><AppContainer /></Provider>, document.getElementById('ori-chatbot-root'));\nserviceWorker.unregister();\n","import { createStore as _createStore, applyMiddleware, compose } from 'redux';\n\nimport socketMiddleware from './chat_details/middleware';\nimport rootReducer from './rootreducer';\n\nexport default function createStore() {\n  const middlewares = [\n    socketMiddleware\n  ];\n  return _createStore(\n    rootReducer,\n    compose(\n      applyMiddleware(...middlewares),\n      window.devToolsExtension ? window.devToolsExtension() : f => f\n    )\n  );\n}\n","import { getPsid, getPlatform } from './utils';\nimport { MESSAGE_TYPES } from './constants';\n\nconst version = 1.1;\nconst brandName = 'vodafone';\n// const brandName = 'dishtv';\n\n// const url = \"https://webtest.vodafone-elb.oriserve.in\";\n// const url = \"https://dishtestbackend.oriserve.in\";\n// const url = \"https://tata-altroz-staging-backend.oriserve.in\";\n// const url = \"http://localhost:8095\";\n// const url = \"https://piramal-backend.oriserve.in\";\n// const url = \"https://dishtv-testing-backend.oriserve.in\";\n// const url = \" https://dishtv-testing-backend.oriserve.in\";\nconst url = \"https://vodafone-dev.oriserve.in\";\n\nexport const getSocketUrl = () => {\n    const socket_url = `${url}/liveConversations?psid=${getPsid()}&ver=${version}&role=user&brandName=${brandName}&botName=${brandName}&channelName=${getPlatform()}`;\n    return socket_url;\n};\n\nexport const chatbot_client_info = {\n    sentry_dsn: \"https://fa80a3e669cc4ee78bcb94c405adecba@sentry.io/1512125\",\n    icon_url: \"https://d113ddgi4j6d7k.cloudfront.net/dashboard/ava.png\",\n    brand_name: \"Vodafone\",\n    sender_id: \"dish_chat_client\",\n    trigger: {\n        visibility: false, //to enable custom trigger\n        icon_url: \"https://d113ddgi4j6d7k.cloudfront.net/dashboard/ava.png\",\n        icon_height: 90, //in number only\n        mobile_icon_width: 80, //in number only\n        animation_duration: 2000, // in milliseceond only\n        lottie_visibility: true, // to enable lottie icon\n        lottie_path: \"https://d113ddgi4j6d7k.cloudfront.net/dashboard/cue.json\",\n        lottie_icon_height: 70,\n        lottie_icon_width: 70,\n        show_close_icon: true,\n    }\n};\n\nexport const chatbot_setting = {\n    automate_connection_time: 3600, //in seceond only\n    automate_reset_chat_time: 3600 * 24 * 4, //in second only\n    powered_by: {\n        visibility: true, // to enable powered by tag\n        target_url: \"http://oriserve.com/\",\n        icon_url: \"https://d113ddgi4j6d7k.cloudfront.net/ori_logo.png\"\n    },\n    notification_bot: {\n        visibility: true, // to enable notification popup\n        stack_view: false, // to show to stack view of notification bot\n    },\n    chat_interface: {\n        show_bg_image: true, // to enable chatinterface background\n        bg_image_url: \"https://d113ddgi4j6d7k.cloudfront.net/dashboard/chat_interface.jpg\"\n    },\n    adster_bot: {\n        query_param_key: 'ischatbotopen', // query parameter key\n        visibility: true, // to enable iframe require changes\n    },\n    auto_emit_response: {\n        enable: true,\n        payload: {\n            type: MESSAGE_TYPES.TEXT,\n            text: \"first emit message\",\n        }\n    }\n};\n\nexport const chatbot_status = {\n    common: {\n        socket_connection_lost: \"connection has been lost\"\n    },\n    feedback: {\n        greeting: \"How happy are you with our support ?\",\n        low_rated: \"Please tell us what went wrong.\",\n        high_rated: \"Please suggest how can we make your next visit awesome.\",\n        success: \"Thank you for giving us feedback\",\n        failed: \"Some error occured please try again later\"\n    }\n};\n\n"],"sourceRoot":""}