(this.webpackJsonpchatbot=this.webpackJsonpchatbot||[]).push([[6],{781:function(e,t,n){"use strict";var a=n(1),o=n.n(a),i=n(901),r=n.n(i);t.a=function(e){return o.a.createElement("div",{className:"ori-animated ori-fade-in-up"},o.a.createElement(r.a,{size:11,className:"ori-font-danger"}),o.a.createElement("span",{className:"ori-font-xxs ori-font-light"}," by"),o.a.createElement("a",{href:e.target_url,target:"blank",className:"ori-font-xxs"},o.a.createElement("img",{src:e.logo_url,className:"ori-l-mrgn-5 ori-height-10 ori-cursor-ptr",alt:""})))}},786:function(e,t,n){},787:function(e,t,n){},901:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=r(n(1)),i=r(n(148));function r(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return o.default.createElement(i.default,a({viewBox:"0 0 40 40"},e),o.default.createElement("g",null,o.default.createElement("path",{d:"m32.5 17.5h-10l7.5-17.5-22.5 22.5h10l-7.5 17.5 22.5-22.5z"})))},e.exports=t.default},930:function(e,t,n){"use strict";n.r(t);var a=n(44),o=n(107),i=n(108),r=n(111),l=n(109),c=n(110),s=n(1),d=n.n(s),m=n(69),u=n.n(m),f=n(219),h=n.n(f),p=n(741),_=n.n(p),b=n(14),g=n(2),v=n(4),C=(n(786),n(787),function(e){function t(){return Object(o.a)(this,t),Object(r.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.is_internet_connected,n=e.is_socket_connected;return d.a.createElement("div",{className:"oriChatBotHeaderContainer"},d.a.createElement("div",{className:"ori-flex-row"},d.a.createElement("div",{className:"ori-animated ori-fade-in ori-r-mrgn-15 avatarContainer"},d.a.createElement("img",{src:b.a.icon_url,alt:"",className:"ori-img-contain"})),d.a.createElement("div",{className:"titleContainer"},d.a.createElement("p",{className:"ori-capitalize ori-font-md ori-font-medium ori-no-b-mrgn"},b.a.brand_name),d.a.createElement("div",{className:"ori-flex-row"},d.a.createElement("div",{className:"ori-flex-column ori-flex-jc "},d.a.createElement("div",{className:u()("onlineBadge",{active:t&&n})},"\xa0")),d.a.createElement("div",{className:"ori-l-mrgn-5 onlineStatus"},t?n?"Online":"Connecting...":"Offline")))))}}]),t}(d.a.PureComponent)),E=n(783),w=n(770),k=n(781);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(n,!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=d.a.lazy((function(){return n.e(7).then(n.bind(null,923))})),S=d.a.lazy((function(){return n.e(8).then(n.bind(null,924))})),j=d.a.lazy((function(){return n.e(10).then(n.bind(null,929))})),F=d.a.lazy((function(){return Promise.all([n.e(5),n.e(13)]).then(n.bind(null,925))})),N=d.a.lazy((function(){return n.e(14).then(n.bind(null,926))})),M=d.a.lazy((function(){return n.e(11).then(n.bind(null,927))})),I=d.a.lazy((function(){return n.e(12).then(n.bind(null,928))})),T={width:"100%",height:"100%",top:"0",bottom:"0",left:"0",right:"0",maxHeight:"none",minHeight:"none",borderRadius:"1px"},U=function(e){function t(){var e,n;Object(o.a)(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return(n=Object(r.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(c)))).state={show_menu:!1,show_feedback:!1,end_chat_form_data:{},file:null,fileUrl:"",show_file_preview:!1},n.setMessageContainerRef=function(e){n.messagesContainer=e},n.openMenu=function(){n.setState({show_menu:!0})},n.closeMenu=function(){n.setState({show_menu:!1})},n.scrollContainerToBottom=function(){Object(g.s)(n.messagesContainer)},n.handleResetChat=function(){var e=n.props.chat_details,t=e.psid,a=e.is_socket_connected,o=n.props.actions;if(a){var i={psid:t};o.resetChat(i,(function(){var e=Object(g.j)();localStorage.setItem(g.a.MESSAGES(),JSON.stringify(e)),localStorage.setItem(g.a.LAST_EMIT,null),o.setDefaultState(),n.closeMenu()}))}},n.showFeedback=function(){n.setState({show_menu:!1},(function(){setTimeout(n.setState({show_feedback:!0}),400)}))},n.closeFeedback=function(){n.setState({show_feedback:!1})},n.minimizeChatbotInterface=function(){n.props.actions.handleChatbotInterface(!1)},n.onClickCloseIcon=function(){var e=n.props.chat_details.end_chat,t=n.props.actions,a=e.visible?{visible:!1,show_confirmation_card:!1,show_form_card:!1,show_resolved_card:!1,form:[],description:null}:{visible:!0,show_confirmation_card:!0,show_form_card:!1,form:[],description:null};t.updateEndChat(a)},n.handleFormInputChange=function(e){n.setState({end_chat_form_data:O({},n.state.end_chat_form_data,Object(a.a)({},e.target.name,e.target.value))})},n.handleFormSelectChange=function(e,t){t&&t.props&&t.props.name&&n.setState({end_chat_form_data:O({},n.state.end_chat_form_data,Object(a.a)({},t.props.name,e))})},n.confirmEndConversation=function(){var e=n.props,t=e.actions,a={psid:e.chat_details.psid};t.emitCustomEvent(v.d.END_CONVERSATION,a,(function(e,o){if(console.log(a,e,o),!e&&o&&o.data&&o.data.formData){n.handleResetChat();var i={show_confirmation_card:!1,show_resolved_card:!1,show_form_card:!0,form:o.data.formData,description:o.data.formTitle?o.data.formTitle:null};t.updateEndChat(i)}else t.handleChatbotInterface(!1),n.onClickCloseIcon()}))},n.submitEndFormFormData=function(){var e=n.state.end_chat_form_data,t=n.props,a=t.actions,o={psid:t.chat_details.psid,formData:e};a.emitCustomEvent(v.d.END_CONVERSATION_FORM_SUBMIT,o,(function(){a.handleChatbotInterface(!1),n.onClickCloseIcon()}))},n.beforeFileUpload=function(e){return console.log("file",e),e&&e.name&&Object(g.d)(e.name)?Object(g.e)(e).then((function(t){n.setState({file:e,fileUrl:t,show_file_preview:!0})})):(console.log("selected file is not an image"),Object(g.u)("warning","selected file is not an image")),!1},n.onFileRemove=function(){n.setState({file:null,fileUrl:""})},n.onFilePreviewCancel=function(){n.setState({show_file_preview:!1})},n.onClickFileSend=function(){var e=n.state,t=e.file,a=e.fileUrl;(0,n.props.handleFileUpload)({file:t,fileUrl:a}),n.onFilePreviewCancel()},n.onDowntimeComplete=function(){var e=n.props.actions;e.updateState("downtime",{}),setTimeout(e.makeSocketConnection,1e3)},n}return Object(c.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){Object(g.s)(this.messagesContainer)}},{key:"render",value:function(){var e=this.state,t=e.show_menu,n=e.show_feedback,a=e.show_file_preview,o=e.file,i=e.fileUrl,r=this.props,l=r.is_adster_bot,c=r.chat_details,m=r.sendTextToServer,f=r.handleMsgBtnClick,p=r.handleFileUpload,v=r.handleOfferSelection,y=r.onChangeCheckbox,U=r.actions,D=Object(g.q)(),P={bottom:b.a.trigger.show_close_icon?"calc(20px + 70px + 20px)":0,borderRadius:b.a.trigger.show_close_icon?"8px":"8px 8px 0px 0px"};return D&&(P=O({},P,{},T)),d.a.createElement("div",{className:u()("ori-fixed ori-animated ori-z-index-99992 oriChatBotContainer",{"ori-fade-in-up":!b.a.trigger.show_close_icon,"ori-fade-in":b.a.trigger.show_close_icon}),style:P},d.a.createElement("div",{id:"chatbotContentContainer",className:"ori-relative ori-flex-column chatBotContentContainer",style:{backgroundImage:b.b.chat_interface.show_bg_image?"url(".concat(b.b.chat_interface.bg_image_url,")"):"none"}},d.a.createElement(s.Suspense,{fallback:null},d.a.createElement(I,{isMounted:c.downtime.isDownTime,delayUnmountTime:400},d.a.createElement("div",{className:"ori-pad-10 ori-bg-white ori-border-radius-3"},d.a.createElement(M,{downtime:c.downtime,onDowntimeComplete:this.onDowntimeComplete})))),d.a.createElement(s.Suspense,{fallback:null},d.a.createElement(F,{isMounted:c.end_chat.visible,delayUnmountTime:400,is_socket_connected:c.is_socket_connected,end_chat:c.end_chat,closeEndChatPopup:this.onClickCloseIcon,confirmEndConversation:this.confirmEndConversation,handleFormInputChange:this.handleFormInputChange,handleFormSelectChange:this.handleFormSelectChange,submitFormData:this.submitEndFormFormData})),d.a.createElement(s.Suspense,{fallback:null},d.a.createElement(N,{isMounted:a,delayUnmountTime:400,is_socket_connected:c.is_socket_connected,file:o,fileUrl:i,onClickCancel:this.onFilePreviewCancel,onClickSend:this.onClickFileSend,onFileRemove:this.onFileRemove})),d.a.createElement(s.Suspense,{fallback:null},d.a.createElement(x,{isMounted:t,delayUnmountTime:400,closeMenu:this.closeMenu,handleResetChat:this.handleResetChat,showFeedback:this.showFeedback})),d.a.createElement(s.Suspense,{fallback:null},d.a.createElement(j,{isMounted:n,delayUnmountTime:650,is_socket_connected:c.is_socket_connected,closeFeedback:this.closeFeedback,psid:c.psid,sendFeedback:U.sendFeedback})),d.a.createElement("div",{className:"ori-absolute ori-z-index-99994 ori-flex-row ",style:{top:"22px",right:"10px"}},!D&&!l&&!c.end_chat.visible&&d.a.createElement("div",{className:"ori-pad-5 ori-cursor-ptr chatIcons",onClick:this.minimizeChatbotInterface},d.a.createElement("div",{className:"minimizeIcon",style:{height:"16px",width:"13px"}})),!D&&!l&&d.a.createElement("div",{className:"ori-lr-pad-5 ori-cursor-ptr chatIcons",onClick:this.onClickCloseIcon},c.end_chat.visible?d.a.createElement("div",{className:"ori-font-default-hover-white"},d.a.createElement(h.a,{size:18})):d.a.createElement(_.a,{className:"ori-font-xs ori-btn-default",size:"small"},"End chat"))),d.a.createElement("div",{className:"headerContainer"},d.a.createElement(C,{is_socket_connected:c.is_socket_connected,is_internet_connected:c.is_internet_connected})),d.a.createElement("div",{className:"ori-b-pad-40 ori-full-flex ori-full-parent-height chatBodyContainer",id:"messages_container",ref:this.setMessageContainerRef},d.a.createElement(E.a,{btn_disabled:!c.is_socket_connected,messages:c.messages,onMessageVoting:U.onMessageVoting,handleMsgBtnClick:f,handleFileUpload:p,messagesContainer:this.messagesContainer,handleOfferSelection:v,onChangeCheckbox:y,is_typing:c.is_typing,typing_text:c.typing_text})),d.a.createElement("div",{className:u()("ori-relative ori-flex-column ori-flex-jc chatFooterContainer")},b.b.powered_by&&b.b.powered_by.visibility&&d.a.createElement("div",{className:"ori-absolute ori-flex-row ori-flex-jc alignPoweredBy"},d.a.createElement(k.a,{target_url:b.b.powered_by.target_url,logo_url:b.b.powered_by.icon_url})),c.quick_replies&&c.quick_replies.length>0&&d.a.createElement(s.Suspense,{fallback:null},d.a.createElement("div",{className:"ori-absolute carouselContainer"},d.a.createElement(S,{quick_replies:c.quick_replies,sendTextToServer:m}))),d.a.createElement(w.a,{psid:c.psid,sendTextToServer:m,is_input_lock:c.is_input_lock,input_lock_text:c.input_lock_text,onInputFocus:this.scrollContainerToBottom,onClickMenu:this.openMenu,emitCustomEvent:U.emitCustomEvent,beforeUpload:this.beforeFileUpload,onRemove:this.onFileRemove}))))}}]),t}(s.Component);U.defaultProps={is_adster_bot:!1};t.default=U}}]);
//# sourceMappingURL=6.5b32453b.chunk.js.map